---
title: "Lighthouse with Playwright: Performance Testing Guide"
description: "Run Google Lighthouse audits with Playwright for automated performance, accessibility, and SEO testing. Complete setup guide with code examples."
navigation:
  title: Playwright
icon: i-simple-icons-playwright
publishedAt: "2026-01-27"
keywords:
  - playwright lighthouse
  - playwright-lighthouse
  - lighthouse with playwright
  - playwright performance testing
  - playwright lighthouse integration
---

# Lighthouse with Playwright

Run Lighthouse audits programmatically using Playwright. This guide covers direct integration without wrapper libraries — giving you full control over the audit process.

::note
**Requirements**: Node.js 22+, Playwright installed. Lighthouse connects via Chrome DevTools Protocol on a remote debugging port.
::

## What You'll Build

By the end of this guide, you'll have:

- Lighthouse running inside your Playwright test suite
- Performance, accessibility, SEO, and best practices scores
- HTML reports generated automatically
- A foundation for CI/CD integration

## How It Works

Playwright launches Chromium with a remote debugging port. Lighthouse connects to that port and runs its audits on the page Playwright has navigated to.

```
Playwright → launches Chrome with --remote-debugging-port=9222
Lighthouse → connects to port 9222 → runs audits → returns results
```

This is the same approach the `playwright-lighthouse` npm package uses internally, but doing it directly gives you more control and fewer dependencies.

## Setup

Install the required packages:

```bash
npm install -D playwright lighthouse
npx playwright install chromium
```

## Basic Integration

Here's a complete working example:

```js
import { writeFileSync } from 'node:fs'
import lighthouse from 'lighthouse'
import { chromium } from 'playwright'

const PORT = 9222

async function runLighthouseAudit(url) {
  // Launch Chrome with remote debugging enabled
  const browser = await chromium.launch({
    args: [`--remote-debugging-port=${PORT}`],
  })

  const page = await browser.newPage()
  await page.goto(url, { waitUntil: 'networkidle' })

  // Run Lighthouse audit
  const result = await lighthouse(url, {
    port: PORT,
    output: 'html',
    logLevel: 'error',
  })

  // Save HTML report
  writeFileSync('lighthouse-report.html', result.report)

  // Extract scores
  const { categories } = result.lhr
  console.log('Performance:', Math.round(categories.performance.score * 100))
  console.log('Accessibility:', Math.round(categories.accessibility.score * 100))
  console.log('Best Practices:', Math.round(categories['best-practices'].score * 100))
  console.log('SEO:', Math.round(categories.seo.score * 100))

  await browser.close()
  return result.lhr
}

runLighthouseAudit('https://example.com')
```

## Using with Playwright Test

Integrate into your existing Playwright test suite:

```js
import { chromium, test } from '@playwright/test'
import lighthouse from 'lighthouse'

const PORT = 9222

test.describe('Lighthouse Audits', () => {
  test('homepage meets performance threshold', async () => {
    const browser = await chromium.launch({
      args: [`--remote-debugging-port=${PORT}`],
    })

    const page = await browser.newPage()
    await page.goto('https://example.com', { waitUntil: 'networkidle' })

    const result = await lighthouse('https://example.com', {
      port: PORT,
      logLevel: 'error',
    })

    const perfScore = result.lhr.categories.performance.score * 100

    await browser.close()

    // Assert minimum performance score
    expect(perfScore).toBeGreaterThanOrEqual(80)
  })
})
```

::warning
**Important**: Run Lighthouse tests with a single worker (`--workers=1`). Multiple concurrent Lighthouse audits on the same debugging port will conflict.
::

## Configuration Options

Customize the audit with Lighthouse flags:

```js
const result = await lighthouse(url, {
  port: PORT,
  output: ['html', 'json'], // Multiple output formats
  logLevel: 'error',
  onlyCategories: ['performance', 'accessibility'], // Skip SEO/best-practices
  formFactor: 'desktop', // 'mobile' (default) or 'desktop'
  throttling: {
    cpuSlowdownMultiplier: 1, // Disable CPU throttling
  },
  screenEmulation: {
    disabled: true, // Use actual viewport
  },
})
```

### Common Configuration Presets

**Mobile (default):**
```js
{
  formFactor: 'mobile',
  screenEmulation: { mobile: true, width: 412, height: 823 },
  throttling: { cpuSlowdownMultiplier: 4 }
}
```

**Desktop:**
```js
{
  formFactor: 'desktop',
  screenEmulation: { mobile: false, width: 1350, height: 940 },
  throttling: { cpuSlowdownMultiplier: 1 }
}
```

## Extracting Specific Metrics

Access individual Core Web Vitals and other metrics:

```js
const { audits } = result.lhr

// Core Web Vitals
const lcp = audits['largest-contentful-paint'].numericValue // ms
const cls = audits['cumulative-layout-shift'].numericValue // score
const tbt = audits['total-blocking-time'].numericValue // ms (proxy for INP)

// Other useful metrics
const fcp = audits['first-contentful-paint'].numericValue
const tti = audits.interactive.numericValue
const speedIndex = audits['speed-index'].numericValue

console.log(`LCP: ${lcp}ms, CLS: ${cls}, TBT: ${tbt}ms`)
```

## When to Use Direct Integration vs Alternatives

| Approach | Best For | Trade-offs |
|----------|----------|------------|
| **Direct integration** (this guide) | Full control, minimal dependencies | More setup code |
| **playwright-lighthouse** package | Quick setup | Thin wrapper, less maintained |
| **Unlighthouse** | Site-wide audits | Automatic crawling, no per-page control |
| **Lighthouse CI** | CI/CD pipelines | Built for automation, historical tracking |

For testing individual pages in your test suite, direct integration works well. For auditing an entire site, [Unlighthouse](/docs/getting-started/introduction) crawls automatically and tests every page:

```bash
npx unlighthouse --site https://example.com
```

## Common Issues

Running into problems? See [Troubleshooting](/learn-lighthouse/playwright/troubleshooting) for solutions to:

- Port conflicts and "address already in use" errors
- Authentication state not persisting
- Flaky or inconsistent scores
- Chrome/Chromium version mismatches

## Next Steps

::card-group
  ::card{title="Authenticated Pages" to="/learn-lighthouse/playwright/authentication" icon="i-heroicons-lock-closed"}
  Run Lighthouse on pages behind login.
  ::
  ::card{title="CI/CD Integration" to="/learn-lighthouse/playwright/ci-cd" icon="i-simple-icons-githubactions"}
  Automate audits in GitHub Actions.
  ::
  ::card{title="Troubleshooting" to="/learn-lighthouse/playwright/troubleshooting" icon="i-heroicons-wrench-screwdriver"}
  Fix common integration issues.
  ::
::

## Related

- [Core Web Vitals Guide](/learn-lighthouse/core-web-vitals) — Understanding LCP, CLS, INP
- [Lighthouse CI](/learn-lighthouse/lighthouse-ci) — Google's official CI tool
- [Bulk Lighthouse Testing](/learn-lighthouse/bulk-lighthouse-testing) — Test entire sites
